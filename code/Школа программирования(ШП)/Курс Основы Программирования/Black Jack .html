<!DOCTYPE html>
<html >
  <head>
    <meta charset=utf-8">
	<title>Блек Джек</title>
        <script> 
		
	function getRandomInt(min, max) {
		return Math.floor(Math.random() * (max - min + 1)) + min;
	}
	
	function getCard() {
		var cards = ['6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
		return cards[getRandomInt(0, cards.length - 1)];
}
		function getSum(hand) {
				var sum = 0;
	// сначала считаем все карты кроме тузов
			for (var i=0; i<hand.length; i++) {
				var card = hand[i];
				if (card != 'A') {
					if (card == 'J' || card == 'Q' || card == 'K') {
						sum = sum + 10;
					} else {
						sum = sum + parseInt(card);
					}
				}
			}
			
			// туз считается как 1, если текущая сумма больше 1,иначе - как 11
			for (var i=0; i<hand.length; i++) {
				var card == hand[i];
				if (card == 'A') {
					if (sum > 10) {
						sum = sum + 1;
					} else {
						sum = sum + 11;
					}
				}
			}
			
			return sum;
		}
		
		function getStatus() {
	return 'Диллер: ' + dealer.join(' ') + ' Игрок: ' + player.join(' ') + '.';
}

			
		
		
		
var dealer = [getCard()];
var player = [getCard(), getCard()];

if (getSum(player) == 21) {
	alert('Дьявольское везение! Black Jack на раздаче! $_$');
} else {
var answer = '';
	do {
		answer = prompt(getStatus() + 'Хотите еще карту? 1 - да, иначе - нет');
		
		// сдаем карту игроку либо прекращаем игру
			if (answer == '1') {
				player.push(getCard());
				
				// проверяем, нет ли перебора или выйгрыша
				sum = getSum(player);
				if (sum > 21) {
					alert('Перебор Т_Т ' + getStatus();
					break;
				} else if (sum == 21) {
					alert('Black Jack! :P ' + getStatus());
					break;
				}
			} else {
				// игрок закончил брать карты
				
				// теперь карты берет дилер
				while (getSum(dealer) < 17) {
					dealer.push(getCard());
				};
				
				// проверяем результат
				var sumDealer = getSum(dealer);
				var sumPlayer = getSum(player);
				
				if (sumDealer == 21) {
					alert('У дилера Black Jack! Т_Т' + getStatus());
				} else if (sumDealer > 21) {
					alert('У дилера перебор! ]:-> ' + getStatus());
				} else if (sumPlayer == sumDealer) {
					alert('Ничья! о_О ' + getStatus());
				} else if (sumPlayer > sumDealer) {
					alert ('Выйгрыш :) ' + getStatus());
				} else {
					alert('Проигрыш ;( ' + getStatus());
				}
			}
		} while(answer == '1');
}

//alert(getStatus));

//alert('Дилер: ' + dealer.join(' ') + ' Игрок: ' + player.join(' '));
//alert('Текущая сумма карт у игрока: ' + getSum(player));

/*

<meta charset ="utf-8">
<script>
function getRandomInt(min,max) {
	return Math.floor(Math.random()*(max-min+1))+min;}
function getCard(){
	var cards=['6','7','8','9','10','J','Q','K','A'];
	return cards [getRandomInt(0,cards.length-1)];}
function getSum(arr){
	var sum=0;
	for(i=0;i<arr.length;i++){
		if (arr[i]=='J'||arr[i]=='Q'||arr[i]=='K')
			{arr[i]=10};
		if (arr[i]=='A'){
			if (sum>10){arr[i]=1}
			else{(arr[i]=11)}}
		sum=sum+(parseInt(arr[i]));	}
	return sum;}
function getStatus(){
	return 'Дилер: ' + dealer.join(' ')+' Игрок '+ player.join(' ')+' ';
}
var dealer=[getCard()];
var player=[getCard(),getCard()];
var answer='';
var r;
do {
if (getSum(player)==21){
	alert('Вы выиграли!!!')
	break}
if (getSum(player)>21){
	alert('Вы проиграли!')
	break;
alert(answer);}	
if (getSum(player)<21){
//else{
answer=prompt(getStatus()+'Хотите еще карту?1 -да, иначе нет');
if (answer =='1'){
player.push(getCard());
}
alert(getStatus());}
}while (answer=='1'||answer==1);
//alert('Дилер: '+dealer.join(' ')+' Игрок:'+player.join(' '));
alert('Текущая сумма у игрока: '+getSum(player));
//alert(getSum(['Q','A','A']))
alert(getStatus());

</script>

*/

		
		</script>
	</head>
	<body>	
	</body>
</html>